# 插件列表

点击菜单“协同 > 插件注册”打开插件注册页面。支持按照状态、名称、更新人筛选
运行中默认筛选运行态的插件

![image-20240719140626402](./images/open-monitor/image-20240719140626402.png)所有:包含所有未删除的插件

![image-20240719142055474](./images/open-monitor/image-20240719142055474.png)已删除插件:仅查看已删除插件
![image-20240719142115398](./images/open-monitor/image-20240719142115398.png)



## 插件包上传

点击插件注册页面左上角的“上传插件包”按钮，在弹出框选择插件包上传。

注：同名同版本的插件包不允许重复上传。

![image-20240719140642395](./images/open-monitor/image-20240719140642395.png)

上传成功的插件包在插件包列表进入安装页面

![image-20240719140720279](./images/open-monitor/image-20240719140720279.png)

## 插件包安装

### 第一步 上传插件包

同上

### 第二步 确认插件配置

确认插件配置![image-20240719140809911](./images/open-monitor/image-20240719140809911.png)

### 第三步 设置服务列表

配置服务列表,自动继承上一个版本,批量勾选需要注册的API
如果有特殊需求,可以退出注册弹窗支持继承其他老版本配置/导入新配置,
![image-20240719140847000](./images/open-monitor/image-20240719140847000.png)

### 第四步 运行前端资源

点击注册,下发并启动对应页面的web资源
![image-20240719141017799](./images/open-monitor/image-20240719141017799.png)

### 第五步 运行后台资源

运行插件实例,选择IP预览可创建端口,点击创建,

### ![image-20240719141117836](./images/open-monitor/image-20240719141117836.png)

请在页面等待实例创建成功,可以看到运行实例
![image-20240719141505411](./images/open-monitor/image-20240719141505411.png)

### 第六步 运行后台资源

完成前面步骤,确认点击安装完成,返回主页,可以看到成功运行的插件,此时前后台资源均已生效,可以去对应目录使用功能
前端状态(1个插件,支持1个版本同时运行):前端运行中、前端未生效(被其他版本覆盖)
后台状态(1个插件,支持多个版本同时运行,实际只会使用一个实例):后台运行中(创建实例后)、后台未生效(销毁所有实例后),点击“管理”可以创建、销毁

![image-20240719141558772](./images/open-monitor/image-20240719141558772.png)

## 插件配置

插件卡片,点击“插件配置”按钮进行配置查看，进入页面展示插件的配置信息。

![image-20240719142159116](./images/open-monitor/image-20240719142159116.png)
![image-20240719142245662](./images/open-monitor/image-20240719142245662.png)

### 依赖分析

1. “依赖分析”展示本插件包与其他插件包之间的依赖关系图。

    ![image-20240719142250759](./images/open-monitor/image-20240719142250759.png)

### 菜单注入

1. "菜单注入"展示本插件在WeCube主菜单下注入的子菜单列表。

    ![image-20240719142301961](./images/open-monitor/image-20240719142301961.png)

### 数据模型

1. "数据模型"展示本插件在WeCube系统中已应用的数据模型。

    ![image-20240719142340986](./images/open-monitor/image-20240719142340986.png)同步数据模型
    
    1. 在插件配置的“数据模型”页面，点击“同步数据模型”按钮可以将插件包最新的数据模型以数据模型关系图展示，每次同步后版本号递增。
    
       注：以CMDB插件为例，“同步数据模型”功能需在CMDB插件已确认并运行后才可以操作。
    
       ![image-20240719142850240](./images/open-monitor/image-20240719142850240.png)

### 系统参数

1. “系统参数”展示本插件在WeCube系统注册的系统参数列表。

    ![image-20240719142353699](./images/open-monitor/image-20240719142353699.png)

### 权限设定

1. "权限设定"展示本插件配置的角色操作菜单的权限。

    ![image-20240719142413515](./images/open-monitor/image-20240719142413515.png)

### 运行资源-声明

1. “运行资源-声明”展示"本插件声明的运行容器、数据库和对象存储的配置信息。

    ![image-20240719142426470](./images/open-monitor/image-20240719142426470.png)
    
    
    
    
    
    ### 运行资源-实际
    
    “运行资-实际源”展示"本插件实际的运行容器、数据库和对象存储的配置信息。
    
    ![image-20240719142512208](./images/open-monitor/image-20240719142512208.png)



#### 运行容器

注：插件运行所需的资源需要在“系统 > 资源管理”页面提前录入，如容器主机、数据库主机、S3服务器等。

![resources_management](images/plugin/resources_management.png)

1. 在运行管理的服务器下拉框选择插件运行的服务器。

1. 点击“端口预览”按钮查看服务器上可用的端口。

1. 点击“创建”按钮在服务器上运行插件。

    ![image-20240719142654733](./images/open-monitor/image-20240719142654733.png)

1. 插件运行成功后在页面显示”运行节点“的信息，点击“销毁”按钮可销毁插件运行。

    ![image-20240719142704929](./images/open-monitor/image-20240719142704929.png)

#### 数据库

1. 在输入框输入数据库查询语句。

1. 点击“执行”按钮。

1. 在搜索结果查看返回的数据。

    > 内置SQL注入拦截，并且仅允许select查询语句的执行，请放心使用
    
    ![image-20240719142722753](./images/open-monitor/image-20240719142722753.png)

### 对象存储

1. 查看对象存储信息。

    ![image-20240719142735777](./images/open-monitor/image-20240719142735777.png)

## 服务注册

点击插件卡片的“服务注册”按钮打开服务注册管理页面。页面展示本插件的服务接口列表。一个插件服务可配置多个注册服务列表以供各种场景灵活使用。

![image-20240719142915394](./images/open-monitor/image-20240719142915394.png)

### 新增注册列表

1. 点击插件的服务右侧的加号按钮进行添加。

    **![image-20240719143004387](./images/open-monitor/image-20240719143004387.png)**

1. 配置插件服务的授权角色，点击确定。

    ![image-20240719143130798](./images/open-monitor/image-20240719143130798.png)

1. 输入注册名称，选择目标对象类型。目标对象类型下拉列表包含WeCube系统已注册并运行插件对象，如任务管理插件的任务、CMDB插件的CI类型等。如果目标对象类型不指定则作用于WeCube系统的所有插件对象。

    ![image-20240719143140700](./images/open-monitor/image-20240719143140700.png)

1. 配置插件接口的属性。属性类型分为4种类型context、entity、system variable和constant。

    ![image-20240719143546217](./images/open-monitor/image-20240719143546217.png)

    ![plugin_service_param_type](images/plugin/plugin_service_param_type.png)

    1）配置插件接口的属性类型为context，在任务编排配置时该接口的属性参数可以从编排的其他任务的输入或输出参数获取。

    2）配置插件接口的属性类型为entity，可在属性配置框输入由根目标对象类型为起点关联的CI属性。输入"\~"弹出根目标对象被引用的其他CI类型列表，输入“."可弹出本对象的CI属性列表进行配置。

    3）配置插件接口的属性类型为"system variable"，可在属性配置列表选择已在WeCube系统注册的系统参数。

    4）配置插件接口的属性类型为“constant”，在任务编排配置时该接口的属性参数可以通过文本输入框输入常量值。

    配置完成后点击确定关闭配置框。

1. 点击“保存”按钮保存插件服务列表的配置信息。

![image-20240719143605410](./images/open-monitor/image-20240719143605410.png)

6. 点击“注册”按钮注册插件服务列表。

![image-20240719143613847](./images/open-monitor/image-20240719143613847.png)



### 注销注册列表

1. 点击插件的服务，在页面右侧选择已注册的列表，点击“注销”按钮注销服务。

![image-20240719143625717](./images/open-monitor/image-20240719143625717.png)


### 批量注册/注销列表

点击“批量注册”选中-快速注册/反选-注销插件服务列表。

![image-20240719143703854](./images/open-monitor/image-20240719143703854.png)

### 继承老版本

![image-20240719143805809](./images/open-monitor/image-20240719143805809.png)

### 导入新配置

![image-20240719143841746](./images/open-monitor/image-20240719143841746.png)

![image-20240719143828396](./images/open-monitor/image-20240719143828396.png)




### 导出配置

![image-20240719143909899](./images/open-monitor/image-20240719143909899.png)

## 停用插件包

1. 打开插件包的运行管理页面，点击“销毁”按钮停用插件运行节点。

![image-20240719143926027](./images/open-monitor/image-20240719143926027.png)

1. 在插件注册页面的插件包右侧点击删除按钮，在确认弹出框点击“确定”按钮。
![image-20240719144007731](./images/open-monitor/image-20240719144007731.png)

注：如果该插件包已注册了UI界面子菜单，需刷新页面更新WeCube系统已删除的子菜单。

1. 勾选“已删除插件”，可查看所有的插件包列表，注意删除仅为软删除,不可以上传重复的包

![image-20240719144048078](./images/open-monitor/image-20240719144048078.png)
